
#include <iostream>
using namespace std;
int **arr,start,spot,amount;
int *done,locate = -1;
bool exist(int target)
{
	for (int i = 0; i <= locate; i++)
	{
		if (done[i] == target)
			return true;
	}
	return false;
}

bool othLink(int s)
{
	for (int i = 0; i < amount; i++)
	{
		if (arr[i][0] == s)
		{
			return true;
		}
		else if (arr[i][1] == s)
		{
			return true;
		}
	}
	return false;
}
int getLink(int s)
{
	int retValue = -1;
	for (int i = 0; i < amount; i++)
	{
		if (arr[i][0] == s)
		{
			retValue = arr[i][1];
			arr[i][0] = 0;
			arr[i][1] = 0;
			break;
		}
		else if(arr[i][1] == s)
		{
			retValue = arr[i][0];
			arr[i][0] = 0;
			arr[i][1] = 0;
			break;
		}
	}
	return retValue;
}
void DFS(int i)
{
	if (!exist(i))
	{
		cout << i << " ";
		done[++locate] = i;
	}
	while (othLink(i))
	{
		int Find = getLink(i);
		if (Find != -1)
		{
			DFS(Find);
		}
	}
	
	
}
int main()
{
	cin >> start >> spot >> amount;
	arr = new int*[amount];
	for (int i = 0; i < amount; i++)
	{
		arr[i] = new int[2];
	}
	for (int i = 0; i < amount; i++)
	{
		cin >> arr[i][0] >> arr[i][1];
	}
	done = new int[amount];
	DFS(start);
}
